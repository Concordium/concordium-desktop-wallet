import { Identity } from '../utils/types';
import knex from './knex';

const identitiesTable = 'identities';

export async function getAllIdentities(): Promise<Identity[]> {
    let identities = await knex.select().table(identitiesTable);
    return identities;
}

export async function insertIdentity(identity: Identity) {
    // TODO Remove test code.
    var identityObject = identityJson;
    identity.identityObject = identityObject;
    return await knex(identitiesTable).insert(identity);
}

const identityJson: string = "{\n    \"v\": 0,\n    \"value\": {\n        \"attributeList\": {\n            \"chosenAttributes\": {\n                \"countryOfResidence\": \"DK\",\n                \"dob\": \"19700101\",\n                \"firstName\": \"John\",\n                \"idDocExpiresAt\": \"20211231\",\n                \"idDocIssuedAt\": \"20200101\",\n                \"idDocIssuer\": \"DK\",\n                \"idDocNo\": \"12345\",\n                \"idDocType\": \"1\",\n                \"lastName\": \"Doe\",\n                \"nationalIdNo\": \"N-1234\",\n                \"nationality\": \"DK\",\n                \"sex\": \"0\",\n                \"taxIdNo\": \"T-1234\"\n            },\n            \"createdAt\": \"202012\",\n            \"maxAccounts\": 200,\n            \"validTo\": \"202112\"\n        },\n        \"preIdentityObject\": {\n            \"choiceArData\": {\n                \"arIdentities\": [1, 2, 3, 4, 5],\n                \"threshold\": 4\n            },\n            \"idCredSecCommitment\": \"a6eef51c6b30e3b3aba9608ad28f210ca62816fa69e4614f09677ed485703ee0b34e2165e2cd71b000caba66b53944f3\",\n            \"ipArData\": {\n                \"1\": {\n                    \"encPrfKeyShare\": \"971e26dfc47c01c4e3495dab9f92d7112ea3c0d0b7aff5617b1bc8b9f6532d37fdb69538885dbf71facb9607fbbbc22bb1362faba884d7895c7cc9468f856fe529a5f61c87e0f880ad9caad83b4037f299bc37f40ef54c5bb10efc24f0db22bbb1ff02c8bb3a30ec1593448b9aaacfd29dc8d43c4b38b4bfc71d2687d401abe55958c2aa6d890105712b1f255ca0d5e4b3c27c89f04a70282df7e75ba21355a22b5ae7d417fb20843eb3c2771b2c1813ed7964e364efbf8da4ca7e02790fb0a8a5e9adeb2617a05af6140033b51e2793fac397b173cedb03e2311146c49bcda7c6a0ae2b103bc6da9b5b9e46200840b28577da037831a2fa30e70cf86ba5ee0aee9a65faee1faa4cae2f59e0a33d9f7ab395eadbefa18df37e8d4f1a7fcf1572a6bb8cc562b503b6036df28c4195d8b5857b5a7ce61e4395af2d46e4059caef8a8d31d983c531b1ae0ddd9fa6ee5c2d98a77124d853527e4377922a42b1ab6f8447ca7ddd624044d7e0df837ff2de013dcb2465fa0a015f5958f7fe73d969e018bb4dcb40c42e62fe0adcd9505ebe0d526abe7d9f61db3c2a709c353a3028ee96735eedbc707d10fde39c2d33d1e81138d3e9849bb2bb86b4d051ce7b842b3b96e9b202b3dc932a323cb96f3a2dc413b5009848abf0d709f79352c15d4bb28c8961ebf844ce49de78f22d7002f4de92c69cdf782df05734bc31f10221a63e3f45b4c7dcb95533d5878cd6d294e688d598f238f6a98dfc79fd4a8884ab339b35f1bd729e3322da88b421fe5f6e0ab86dd671ba7807d8963b5d9a8380b7a7a3b44b9d70a883d4a1aa93873ac678afc7d15c77d00bb87831992575df9d7bc6179b595463fea603bb673d5e0af91f7b113fda4ba2cf14b2010bd3b0e722546acb828cd9d758b06d43cca85e8b792e97e5a7bc18f7851911e31f5b12837038505a0d898546e38a51a40632ccb050ba6691b511a422c58dd6ed4ef4b654441b3bac4301b8e9bd2a99136175c57d72af945d694a90a33c6b03119548dc9aceb870534c31ea3b3ae670c8a6650988d1faec74eeb204801d2cee564054c020bd73d28cb02\",\n                    \"proofComEncEq\": \"013858d793d334ad1e5fa2bfff4f917f16a84be41baf6c2bdf07e5ec9c52d3921045305feb67b1611d20f963a894ab0328d6a27e52c61bde9b0d24092165d45534bec01c545f5f818fbc437bd485e3d87a8f4c281e635eef6208710604a0da29\"\n                },\n                \"2\": {\n                    \"encPrfKeyShare\": \"90fdefd7b8ccd77482a6403c887cffc5aac729d56b8d97cdbc8abb0484d9f69af2dc54083f2baf806fced14092be913fb4b68b63af74b803592d15578c5f1637769ffbb83d371d02a16a9c4907e19cfd45ce69b419c253cd221b05dfdfa30928a8242c393b855a6b194fe4ee62dab81dba932cd7668651c54ebca9f91cf1b422aa17c10b3dae70920fae5e8f42bcf77698af1e44a717e011c876d7f4c606f8b2a893049c6afa763bc37cd4e34d5f5062b8d18f63a26089d17dcdc2af3d6b4036b92097865c1407960cd5daf5a34867ca94d9e3cab9e8edb788f47877b17d4571acc2daad2d3d94a4e35b1cc3e4ff9651ab73aec97e22684133f10738a59aad5d5cb9cc512b0cde95aec5601e4ab3fd664d0ee8388317067ad5a37879e64031aaaf0f8b760029ca8847cf4c44251d3461991dd621c794820f911e9337661a53676aad9448b41a034092c61e09613dd392a179d4cc35362324cd9a16040dd5b9c0a88f8dfcf6b95ddbb7803c6824e4832512400f8d31d6187266a674c104ff5941aebbbf9c86d987ef917a51c61c331f9bd7e637fcf7183c651f75f842031017cb8849be26f96a714d9177f71914a143dd830dac6ddf38b2b25a3699bfc2f2d2474cecf948f696598501d1461cd637589aef81b578ae9db408c6f00954b44abda6a51d3800b74ee3dd780ddc262a629f2ac8324943e80e6e09a1e3dd7618ebf63a738516f46a86197e31b58be41aed1675846508ef97369444341be3f15738c1e9b088e167e491587def8e8aad97335dc00cf734366a2d39bf0519d253b96f96f9a9d2efcf9ccfe3e38adfc73d7ee43666ad76f1f6052b64e75a96be80ab360cee54840a58de4fef028867d6a2a918a271a6fc54da95da91dcee3fde1149747929b2ece1dc7e3958476d6bdd2352834a63bb24d00d232237bdcd3719e899d6f61c81f86bee2bb3956d9f63023b701aeacfca532a77472629f304ed2f1830fda503ad3bc10a5adc5b2b680b9919af869d35aaeabfb131fddaf998e89e3632c41bd32ac92728a62b43426cb2b8251404d1a2283903d5a46f7981fc503bd39ae60857\",\n                    \"proofComEncEq\": \"2a5fbcd4cb129d4f481e717e49d24f7d45b8d8007f5832357d6e07eade679d2900f051d13f406ff5c7bf242137416b5b821a42512686754bd3d8ab729f0d96310ff3a781994eafe2887793c9f804c3cfc4c708ae23d229e140544b2693bc87a4\"\n                },\n                \"3\": {\n                    \"encPrfKeyShare\": \"b0bb351e80b2db7fadb5991b4d8114d0ea922bc4180f496e478d82a76d485e5dbfd92510d2d14721f605de9b7cb06a31a10a402a7f799db459c795a5ff1668f7670d357f48b33d4f485f67cb12bafc9d06cd824c158c73d15da91e5ac0f3d3b3ad5739e638a3c0b962e320d23675e82c91cb1d00f92197a1503d78481997b0529e5ba8437578edf888953c2478db4205b46a057a8daaeea1fa82fad0a82b43eb13489a44d22b2a8b3fb491a1861bbb9c0f35ab0079ac1069af486704e5487413892d23ac293198a8dcb9178070feed7476d8eb3120493446d6c2020de19641832ec26303c5a37340aec11ba8e1648421a19a57b6d7d17b48e9fa7b742f5b88780fa4a1f4e76defcc49f87550c3775c3515c24339373dcdb78fba8b3225bac414a75c3b3030854a42ae5ebcfb192c28260885e377f03c1d08c9ebd69e869011ab8c88633cbe09793252bea739dd555c7fa4f0fb8cc04b5dfba6df803ae3a2a4727effbf58e4e2ad2f91dc6aaa658e2fdf10a60d1947dfbf65103484538bb229fc8252bfa652150ee3192d6a830cf0063914163f47c8f913a10772cdbd77a53d978ea3d11735842c4b9e54b57e03f04315aa96fd28d2f19225e7288171c80c8626ea5a7e000d37679413ae65955571ab163b32453e34497e119024670cf50c8ad6b790f75bd80eaafe12683d8ac754ef5174128f597ff2917eace76d7dd9700c42778dd877de94a71be24132fe19260ccbaca908e1ed6181788cdb04c7af48709559a228d21dbb5e9e63527cdca2a7fbbdcdfdb5b88256f5085ad58c2f47122b8398c314ef1534089891c62551f49e053d487a03a709b462fbb4971d7d873fa0c5ae6dde4a2cf38a148752b5924b10bdfc8641e7053135d7605d4a48d4e685808a4220f89b48855aa0639f2365bbc73e0e8a57395f1eb7e102a4fb1810398c13f68d6b649f7e8b9b456406582b944fdb643e753f46b0663b31f98cdf71f74cd6383b947367d286b54cb4ce91c1829d4fdda9c464563bc5a6c6628f6d446c19fd9b3e743a76700930361fdba3f754ef6e6e7f2dc9f925caedd099b1e96f894f3452\",\n                    \"proofComEncEq\": \"164e2814a99cd37f44047c3128e042647d7ab7c0da772cb07db83e5831505dae34cc6e2ae6a0fae5ea069cd3b6c12021df7ebf06229bf48dcc82edcd0369f10f0165f8dd2989061015c8cc1cde409d2ff1b43a794d53bf327bd9817bbed85dc6\"\n                },\n                \"4\": {\n                    \"encPrfKeyShare\": \"996acdd7d1339c9d0b9152da1a6b94defc3a956ede3b06d4826fe2fb710d55d0b0684332f1ab4bc20c18d3ff1169f6c09663d75559d99afa65617b87d2445128ea610cd6e612c5cb0c95f6d67d73dd3e6e82c925a9241fc19d72939fa12f56cc8346628a930accb8e96896786166a84d1cf16f9dca8c9d66ca9ad88148aed77fe9fdebb093e5332b34157760dcd08f32891425afa6bd8bc320e13d0ca5801b1982c7f4f3c6539ad19068f09296f0086cf6597e05c57a020e8abe8cda5bd4728c89e40f9041b0a53acc568a8020402f7573445e0fabd8e99d8067d706f6944d5aee1eaf2b5479e441350c61a949ee088a83a800b227bad1a3319bdeeeb2aca87a42734d092d0518203bc4c5f041baf6da69eff3584af9129c71cde6e713a1c225aa47533d84d82bf742b18f8ce9dfda3b523c5960c6df5a7c8a853df93f4f3b3a2b80ce7c34bf81f9a61a832c68dfbaa591010cdc6b92caaec9f059db8781da93a19d0cc8cb39689060c6384fd88837605f732978fdb1e3ae5373fe2956f55f91b1e5b461635c9263723cda1ee011ebb7aca0da86c751767afc2478d8abb45475c0a4d967d4e7643cb22c0af429c8f84d8c135de1c139a035a0861687fbffa895130cea3d7250df7014df126d7e3e1ab81a41d3161da69bdf81fc8437ea1947f48b920a9b379858547e7d9068ff9515773fc64569dba1d634c4ca3c11dca58784a57a54524ca88c226515d7290ac5b1e2b4e8050f71652bd8b59dbae3bb83e55a8d3a73e4a76fd5d6f34afed924a0d13727204a4f74746c1725355072382b7898865dda0390d2af8454fb5c687055d3eb25612cea29daa6d57b26a24d74c37e8c57c971324e74b1c9bb49dace96568d06a5771bb17c2702d756b25bd3cd4c6b4f3da8f03e684473beb93efbb083dfe854dc1cf3bab5645bc9f6f0380e3d1d6b4cb51c80912e2e87bbb637ab7d869b52598253c851c3ebb0cd65b7f1cf51d74a01717f725b4ea6f03f089866e2ae1c9028831d03fbb7af425afde1696fcd899d3eb26127e0b912cebf603ba905f8309b4a5ef07904890385ebc46331772e09f8f6\",\n                    \"proofComEncEq\": \"25b4f7412969a90679dc869aae05f85be9b14fd5083a9cac6b482f6990a4de632d8785727b105d566260c717dafab8727cfa7ada753169cf2957ce25aac7e0ea5464664b4e417c758da24dc9f7e39221d527062f2de795e690e3281833abfead\"\n                },\n                \"5\": {\n                    \"encPrfKeyShare\": \"90778e92ff3e26530fb6e6b2f31ad7c09d7f0830e85af255db1fd48939c5c45784e4b020f5dce7f72dc9c216e77dab7ea6153de74d03160c2f8b21c33b7895b3b97a59e853c80e1a6c279d5e874950210b7163f4500ce26e18f5258be1253e56a9bf8b39d3a2be590d12839b07d997d8a8c0170d1125be28c38fe5dbd8cb912b108d96518b3c9caf47037a45270a1af5acefed1af808a8a778de22d962024934340b4fad250ad47b21badc7250af2481424138fbec2d81f6d02ca03b24077a64b08f9882cce42f9e8bc352fc1e1b7fa8b910aea28cdc1777ec704edc58780a2999dd6a875e4fd8302cbb03cf12fdd631915cf5348bb92d2cf2e3dd278f08574b2b034b02c8f37849f766c4a7fc7652e52d296bb600b57e2c0bfcf5806152ab7e82e78145766e5fdd8b5195ea19851cd757d2da6e50147c99f4e26ef9fce14517f14ce9316fa8fc18d4e844135766742f8fad1d1bb436e58aedaf798de58f2ff64f2a366c6e5a49a474f3bcbc9075514995cc848f788d9c08b353c3d2f46bb194b151d41422059608f3d99fc8f463e9af9ac7162f1273f716280450675fc2d3a46305e455b56842612a4e6e343e25e7d4b0cf6c83f84a10074482308c5fa3678e3742b69f5679c616b0439991f3f59901ff52c4eb5307bc78bf81709c11382be7b65de8c212af2893449e397a67a9e70667da5fbb25a1ceeb9563dde3309bcc43d67dc53ffd4e78daf544048d9c06e809893b0108b017757a4741c0db5b649a72e276ca26883b4c264c2c684a07f82b201cfca1545209b8b4ed48119b505f780fa7029f5c40f853e9220033f153aedf84d047730147952ac0a6f2dffa4acfc6dc85306457903aaa9addf0d5a91452554c90c74088ece6589fbd7d00ce026943ba8df84f87ac97c2a089154c952afcb525946f5e9f3ba8db120b8d0c81be9bc6cb938c08c31397419ee2dfdb4ff3b260f6943f5c51f372ba419939a98843f1a0acbb873e579b0ae03d547043e3cb25ea10930b48797515b5eeed065b3ff56a26f7730fc662b824f816a644cbf5d55f4625448ec9d28e4a4ac5531eecd204640c62\",\n                    \"proofComEncEq\": \"1419f94edaff241470a2df6e6086032646f45861ecf996c3a258ddaf73efef294531951e1b37280ef7f0e78b85540a263b84c51d0f0cc02deef840ce121a3f736f375edad6ae60604e2fe8aa8cd14544acccc37a41641621349e7031d84c2564\"\n                }\n            },\n            \"prfKeyCommitmentWithIP\": \"8014afd14138a7f8f52c9ffa26064d86229760e3532152ecd965f98d11f4a293f61830f45c4a3688b0f817b495a7411f\",\n            \"prfKeySharingCoeffCommitments\": [\n                \"a5ef01f6842c822eb6aa2067319c58fa3a3a8598ef4815d7516f637bc69cd469c5d0806e780a766a763c4349bd87f1f9\",\n                \"b32c75c5fd540d2fbbe8d2f3819dd6b401dc0f39c761c4b9ba4eeb6c929c34368c04709d61243fe8450e29cfe88841f0\",\n                \"8f6217149bb9c49e5d6d20a77f476be41f0783434773a7e6df975b9d030083714bb9269227db7ae858ca789ab1715b7e\",\n                \"b14acc977f96ca6efbd60c3efe624c85bb346a0704a7fe146846a2a98be25476e80dc9c46d5ce0a9240063ef80113a94\"\n            ],\n            \"proofsOfKnowledge\": \"3356a33dbc4f879310\",\n            \"pubInfoForIp\": {\n                \"idCredPub\": \"9488e1609cb766fdbc14a75881e3d84932965add9ecafaa2bf3a7f1f213f3447ab0d8ae3bb502783b793a99b02c06181\",\n                \"publicKeys\": {\n                    \"keys\": [\n                        {\n                            \"schemeId\": \"Ed25519\",\n                            \"verifyKey\": \"3d0f6d2919f9b47d446426a9b4c3f80557175856b4f886e6340aef337aaf5c6a\"\n                        }\n                    ],\n                    \"threshold\": 1\n                },\n                \"regId\": \"aa323753dfdfb910b5b46ebac7f23e9071f3edfe436bbdaf244fde0ddccc91921a991df2751aa79e009696fe2315602c\"\n            }\n        },\n        \"signature\": \"914ca86c4b5b5b54515b404f85ff3ee7c9fc83d5dae0f1fcc09d9a39e704f0413d459748695b9f95460b4bda0d2d2f3ea72f6a0c755d8c45f353fa96437fe1f3393d74f71d44b863e9dddc8ccfd2f37fe8eea623ce5493ee38357d5fe5e0d5ec\"\n    }\n}\n"